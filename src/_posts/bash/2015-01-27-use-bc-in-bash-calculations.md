---
id: 2321
title: Математика в BASH с помощью bc
date: 2015-01-27T16:05:40+00:00
author: admin

guid: http://www.tech-notes.net/?p=2321
permalink: /use-bc-in-bash-calculations/
image: /wp-content/uploads/2014/10/shellshocker.png
categories:
  - bash
tags:
  - bash
  - Алгебраические функции bc
  - возведения в степень bc
  - Использование bc
  - Округление bc
  - Тригонометри́ческие функции bc
---
`bc` - это язык, который поддерживает числа произвольной точности с интерактивным исполнения отчетности.  
Безусловно, bc - один из аутсайдеров, когда дело доходит до расчетов по командной строке.

Главным достоинством bc является обработка чисел с запятой (float). В среде bash можно проводить обычные операции (сложение, вычитание, деление и умножение) с целыми числами, но без bc не обойтись, когда дело доходит до десятичных дробей.

Дальше приводится несколько примеров использования bc:

### Использование bc для базовых операций:

```bash
bc <<< 3-2  
bc <<< 5*2  
bc <<< 9/3
```

как всегда, можно использовать `echo + |`:

```bash
echo `3*2` |bc  
echo `3-2` |bc  
echo `3*2` |bc  
echo `3/2` |bc
```

`bc`, как положено, соблюдает приоритетность математических операций. Проверьте:

```bash
echo `2 + 2 * 2` |bc
```

### Округление результата

В случае выполнения операции деления из примера bc вернет 1. Для того что бы показать цифры после запятой нужно указать сколько их нужно с помощью `scale` (по умолчанию = 0):

```bash
echo `scale=1;3/2` |bc
```

### Если же у Вас есть файл с набором математических операций
 воспользуйтесь слудющей конструкцией:

```bash
bc < FileName
```

### Использование результата последней операции:

```bash
echo `2 + 2;last * 2` |bc
```

Вместо last можно использовать точку:

```bash
echo `2 + 2;. * 2` |bc
```

**Получение квадратного корня и возведение в степень**  
`sqrt` вернет квадратный корень из числа. Если результат является десятичной дробью - используйте `scale` для отображения знаков после запятой.

```bash
echo `sqrt(16)` | bc
```

Довольно странно, что у библиотеки, написанной на C не предусмотрено использование sqr, но все же его нету.

**Пример возведения в степень:**

```bash
echo `4^2` | bc
```

### Тригонометрические функции:

Сомневаюсь, что кто-то будет в скриптах использовать значение косинуса или натурального логарифма числа, но все же:
  * **s (x)** Синус **x**. **x** задается в радианах.
  * **c (x)** Косинус **x**. **x** задается в радианах.
  * **l (x)** Натуральный логарифм x

### Создание переменных на основе результатов вычислений:

```bash
var1=$(echo `sqrt(16)` | bc)
```

```bash
var2=$(bc <<< "2 + 2 * 2")
```

```bash
echo $var1 + $var2 |bc
```

В <a href="http://www.tech-notes.net/mysql-database-size/" target="_blank">этой статье</a> bc используется для определения места, которое занимают базы даных mysql.

Статьи на английском языке:  
<a href="http://mylinuxbook.com/linux-command-line-calculator-bc-examples/" target="_blank">mylinuxbook.com</a>  
<a href="http://www.basicallytech.com/blog/?/archives/23-command-line-calculations-using-bc.html" target="_blank">basicallytech.com</a>
