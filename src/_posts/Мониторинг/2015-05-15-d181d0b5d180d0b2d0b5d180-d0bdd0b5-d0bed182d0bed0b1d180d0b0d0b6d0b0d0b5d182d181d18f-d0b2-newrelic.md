---
id: 2590
title: Сервер не отображается в NewRelic
date: 2015-05-15T15:07:04+00:00
author: admin

guid: http://www.tech-notes.net/?p=2590
permalink: '/%d1%81%d0%b5%d1%80%d0%b2%d0%b5%d1%80-%d0%bd%d0%b5-%d0%be%d1%82%d0%be%d0%b1%d1%80%d0%b0%d0%b6%d0%b0%d0%b5%d1%82%d1%81%d1%8f-%d0%b2-newrelic/'
image: /wp-content/uploads/2014/07/388159.png
categories:
  - мониторинг
tags:
  - NewRelic
---
Это не статья, а именно заметка в блог обычного технаря.

В своей практике часто выполняю нагрузочное тестирование для сайтов клиентов. В большенстве случаев - ничего особенного о таких вещах рассказать не могу. Всего [одну статью ](http://www.tech-notes.net/moodle-load-test/)написал о том, что было не похоже на другие случаи.

В ходе нагрузочного тестирования, естественно, мониторю сервера, что бы по окончанию определить чего же им не хватает что бы выдержать поток в несколько тысяч пользователей за секунду.

Так вот на сервера по возможности стараюсь мониторить с помощью `Cacti`. Если же в силу разных причин `Cacti` не может отработать `snmp` запросы, приходится использовать [Munin](http://www.tech-notes.net/install-munin-centos-6/). На выходе получаю красивые графики производительности по каждому серверу.

[NewRelic](http://newrelic.com) использую в обязательном порядке что бы посмотреть как ведет себя php, mysql, memcache в о время стресс-теста.

Сегодня долбил сайт, который находится на трех вэб головах и столкнулся с прикольной особенностью NewRelic. При чем этот сайт еще не был доступен публично, а DNS записи указывали на старый сервер. На все сервера был установлен newrelic-php-agent согласно официальному мануалу.

Но в рабочем окружении NewRelic появился только 1 сервер. Остальные сервера не отображались.

Особенность заклается в том, что **сервер не начинает репортить в NewRelic если к ниму не приходит трафик**. Так как на тот момент я был единственным посетителем сайта, то и трафик от меня попадал только на один сервер.

Будьте внимательны если у вас есть балансировщик нагрузки и несколько серверов.
