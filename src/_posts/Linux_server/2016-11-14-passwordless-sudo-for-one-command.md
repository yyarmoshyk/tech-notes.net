---
id: 3498
title: Безпарольный sudo для выполнения одной команды
date: 2016-11-14T09:55:18+00:00
author: admin

guid: http://www.tech-notes.net/?p=3498
permalink: /passwordless-sudo-for-one-command/
image: /wp-content/uploads/2014/10/shellshocker.png
categories:
  - Linux server
---
Допустим понадобилось нам разрешить одному пользователю в системе выполнить приложение, требующее sudo без ввода пароля. Для этого нужно отредактировать файл `/etc/sudoers` соответсвенно:

```bash
имя_пользователя ALL = (ALL) NOPASSWD: /path/to/binary
```

После этого пользователь сможет выполнить binary без ввода пароля следующим образом:

```bash
sudo /path/to/binary
```

Небольшой хак для того, чтобы и sudo вводить не пришлось. очень хорошо подходит docker для примера. По умолчанию все docker команды выполняются с правами суперпользователя. Для того чтобы обычный пользователь в системе смог выполнять docker-команды без необходимости вводить sudo и пароль каждый раз нужно сначала отредактировать `/etc/sudoers` следующей строкой:

```bash
имя_пользователя ALL = (ALL) NOPASSWD: /usr/bin/docker
```

В файл .bashrc в домашнем каталоге пользователя, нужно добавить следующую функцию:

```bash
docker () {
	sudo docker "$@"
}
```


Для применения изменений выполните следующее:

```bash
source /home/имя_пользователя/.bashrc
```

Можно объявить эту функцию глобально отредактировав файл `/etc/profile`
