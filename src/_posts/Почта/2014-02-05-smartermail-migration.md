---
id: 329
title: Перенос SmarterMail на новый сервер
date: 2014-02-05T19:16:54+00:00
author: admin

guid: http://www.tech-notes.net/?p=329
permalink: /smartermail-migration/
image: /wp-content/uploads/2014/02/smarter_mail_logo.jpg
categories:
  - Почта
tags:
  - SmarterMail
  - миграция SmarterMail
  - перезд SmarterMail
---
В любой момент, по той или иной причине, может стать вопрос о переезде `SmarterMail` на новый сервер. Причины на то могут быть разные и их я рассматривать не буду, дабы не лить воду. Что такое SmarterMail я описывать тоже не буду. Если Вы читаете эту статью, значит уже знакомы с этой почтовой системой. В этой статье хочу описать что нужно делать, что бы все прошло гладко при смене места жительства.

В начале повествования хочу обратить Ваше внимание на статью об <a href="/dns-mx-record/" title="DNS MX запись" target="_blank">DNS MX записях</a>. Если Вам знакомо, что это такое и с чем его кушать - можете смело идти в панель управления ДНС адресами и уменьшать значение TTL для домена или доменов, которые обслуживаются Вашим сервером. Нужно будет подождать, пока изменение TTL распространится по всем ДНС серверам в интернете (время ожидания = старый TTL). Это сэкономит время при переключении ДНС адресов на новый ip и позволит свести к минимуму потерю почты.

Дальше пойдет step-by-step tutorial:  
1. Устанавливаем SmarterMail на новый сервер и проверяем, что вэб морда работает исправно.  
1. Останавливаем SmarterMail на обоих серверах.  
1. Забираем файлы `mailConfig.xml` и `domainList.xml` из папки `C:\Program Files (x86)\SmarterTools\SmarterMail\Service` (в отдельных случаях `C:\Program 1iles\SmarterTools\SmarterMail\Service`). Этого должно быть достаточно. При желании можете забирать все xml и dat файлы из этой папки.  
1. Переносим папку `C:\SmarterMail\Domains` на новый сервер. Желательно положить ее в `C:\SmarterMail\`. Если же нужно изменить путь к папке доменов, тогда нужно будет подредактировать файл `domainList.xml`.  
1. Запускаем `SmarterMail` на новом сервере.  
1. Заходим на вэб-морду и активируем приложение.  
1. Возвращаемся в панель управления ДНС адресами и меняем ip адрес со старого на новый. За одно возвращаем предыдущее значение TTL. 

Остается дождаться пока изменения DNS адресов распространяться по всему интернету. Для этого можно воспользоваться ресурсом <a href="http://p.pw/wIR" target="_blank">whatsmydns.net</a>

[перевод](http://portal.smartertools.com/kb/a2724/migrate-smartermail-to-a-different-server)
